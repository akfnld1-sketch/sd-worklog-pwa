<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SD바이오센서 개인출근부 + 급여계산</title>

  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png" />
  <link rel="icon" href="./favicon.ico" />

  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="wrap">
    <header class="top">
      <div class="brand">
        <div class="titleRow">
          <!-- ✅ 타이틀 2줄 -->
          <div class="brandTitle">
            <div class="brandTop">SD바이오센서</div>
            <div class="brandBottom">개인출근부</div>
          </div>
          <span class="pill">PWA</span>
        </div>
        <div class="sub" id="todayLabel"></div>
      </div>

      <div class="topBtns">
  <button class="btn ghost top-pay" id="btnPayToggle" type="button">📊 급여계산기</button>
  <button class="btn ghost top-csv" id="btnExportCsv" type="button">CSV(월) 내보내기</button>
  <button class="btn ghost top-backup" id="btnBackup" type="button">백업(JSON)</button>
  <button class="btn ghost top-restore" id="btnRestore" type="button">복원(JSON)</button>
  <input id="fileRestore" type="file" accept="application/json" style="display:none" />
     </div>
    </header>

    <!-- ✅ 급여 계산기(전체 화면 모드로도 사용) -->
    <section class="card payCard" id="payCard" aria-hidden="true">
      <div class="cardHead">
        <div>
          <h2>급여 계산기</h2>
          <div class="mini">기본값: 시급 10,320원 · 209시간 → 기본급 2,156,880원</div>
        </div>
        <div class="row tight">
          <button class="btn ghost" id="btnPayClose" type="button">닫기 ✕</button>
        </div>
      </div>

      <div class="grid3">
        <div class="field">
          <label>시급(원)</label>
          <input class="input" id="wageHourly" type="number" min="0" step="10" />
        </div>
        <div class="field">
          <label>월 기준시간(시간)</label>
          <input class="input" id="wageMonthlyHours" type="number" min="0" step="1" />
        </div>
        <div class="field">
          <label>기본급(자동)</label>
          <input class="input" id="wageBaseAuto" type="text" readonly />
        </div>
      </div>

      <div class="grid2">
        <div class="field">
          <label>잔업수당(원)</label>
          <input class="input" id="allowOT" type="number" min="0" step="1000" />
        </div>
        <div class="field">
          <label>특근수당(원)</label>
          <input class="input" id="allowSpecial" type="number" min="0" step="1000" />
        </div>
        <div class="field">
          <label>자재수당(원)</label>
          <input class="input" id="allowMaterial" type="number" min="0" step="1000" />
        </div>
        <div class="field">
          <label>지게차수당(원)</label>
          <input class="input" id="allowForklift" type="number" min="0" step="1000" />
        </div>
      </div>

      <div class="sumBox">
        <div class="sumRow">
          <div class="k">기본급</div>
          <div class="v" id="sumBase">0원</div>
        </div>
        <div class="sumRow">
          <div class="k">추가수당 합계</div>
          <div class="v" id="sumAllow">0원</div>
        </div>
        <div class="sumDivider"></div>
        <div class="sumRow total">
          <div class="k">총 지급액</div>
          <div class="v" id="sumTotal">0원</div>
        </div>
        <div class="mini" style="margin-top:8px;">※ 개인용 계산기(참고용)입니다. 공제/세전·세후는 회사/개인 상황에 따라 달라집니다.</div>
      </div>
    </section>

    <!-- 탭 -->
    <nav class="tabs" id="tabsBar">
      <button class="tab active" data-tab="attendance">출근부</button>
      <button class="tab" data-tab="report">월간리포트</button>
      <button class="tab" data-tab="settings">설정</button>
    </nav>

    <!-- ✅ 출근부 -->
    <main class="tabPanel active" id="tab-attendance">
      <section class="card">
        <div class="cardHead">
          <h2>달력</h2>
          <div class="mini">출퇴근 기록하면 달력에 바로 표시됩니다 (2026-01-01부터)</div>
        </div>

        <div class="calHead">
          <div class="calNav">
            <button class="btn ghost" id="btnPrevMonth" type="button">◀</button>
            <div class="calMonth" id="monthLabel"></div>
            <button class="btn ghost" id="btnNextMonth" type="button">▶</button>
          </div>
          <div class="calHint" id="profileBadge"></div>
        </div>

        <div class="dow">
          <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
        </div>
        <div id="calendar" class="calendar"></div>
      </section>

      <section class="card">
        <div class="cardHead">
          <h2>선택 날짜 기록</h2>
          <div class="mini" id="selectedLabel"></div>
        </div>

        <div class="grid2">
          <div class="field">
            <label>출근시간</label>
            <input class="input" id="inTime" type="time" step="60" />
          </div>
          <div class="field">
            <label>퇴근시간</label>
            <input class="input" id="outTime" type="time" step="60" />
          </div>
        </div>

        <div class="actions">
          <button class="btn btn-in" id="btnIn" type="button">✅ 출근</button>
          <button class="btn btn-out" id="btnOut" type="button">🏁 퇴근</button>
          <button class="btn btn-leave" id="btnLeave" type="button">🟦 연차</button>
          <button class="btn btn-half" id="btnHalf" type="button">🟪 반차</button>
          <button class="btn btn-absent" id="btnAbsent" type="button">🟥 결근</button>
        </div>

        <div class="field" style="margin-top:10px;">
          <label>메모</label>
          <input class="input" id="note" type="text" placeholder="예: 특이사항" />
        </div>

        <div class="toast" id="toast" role="status" aria-live="polite"></div>

        <div class="row" style="margin-top:12px;">
          <button class="btn ghost" id="btnUndo" type="button">방금 취소(Undo)</button>
          <button class="btn danger" id="btnResetDay" type="button">이 날짜 기록 초기화</button>
        </div>
      </section>
    </main>

    <!-- ✅ 월간리포트 -->
    <main class="tabPanel" id="tab-report">
      <section class="card">
        <div class="cardHead">
          <h2>월간 리포트</h2>
          <div class="mini">월 누적 출근/결근/연차 통계 + 월 CSV</div>
        </div>

        <div class="row">
          <button class="btn ghost" id="btnReportPrev" type="button">◀ 이전달</button>
          <div class="reportMonth" id="reportMonthLabel"></div>
          <button class="btn ghost" id="btnReportNext" type="button">다음달 ▶</button>
        </div>

        <div class="statsGrid" id="reportStats"></div>

        <div class="mini" style="margin-top:10px;">
          월 CSV는 상단 <b>CSV(월) 내보내기</b> 버튼으로도 동일하게 내려받을 수 있습니다.
        </div>
      </section>
    </main>

    <!-- ✅ 설정 -->
    <main class="tabPanel" id="tab-settings">
      <section class="card">
        <div class="cardHead">
          <h2>설정</h2>
          <div class="mini">이름/테마는 1회 저장하면 계속 유지됩니다</div>
        </div>

        <div class="grid2">
          <div class="field">
            <label>내 이름(한 번만 입력)</label>
            <input class="input" id="profileName" type="text" placeholder="예: 황현우" />
          </div>

          <div class="field">
            <label>테마</label>
            <select class="input" id="themeMode">
              <option value="dark">다크</option>
              <option value="light">라이트</option>
            </select>
          </div>

          <div class="field">
            <label>배경 색상</label>
            <input class="input" id="bgColor" type="color" />
          </div>

          <div class="field">
            <label>카드 색상</label>
            <input class="input" id="cardColor" type="color" />
          </div>
        </div>

        <div class="row">
          <button class="btn" id="btnSaveSettings" type="button">설정 저장</button>
          <button class="btn ghost" id="btnResetSettings" type="button">설정 초기화</button>
        </div>

        <div class="hint" style="margin-top:10px;">
          ✅ 개인용 구조: <b>명단 입력 없음</b> / 내 이름만 설정에 저장 → 출근 기록이 계속 누적됩니다.
        </div>
      </section>
    </main>

    <footer class="foot" id="footerBar">
      <small>서버 없음 · 데이터는 이 기기(브라우저)에 저장 · PWA 설치 가능 · 월 CSV/백업 지원</small>
    </footer>
  </div>

  <script src="./app.js"></script>
</body>
</html>
